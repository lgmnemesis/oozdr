<ion-app>

  <ion-split-pane when="md" contentId="main" 
    [disabled]="!useSplitPane" 
    (ionSplitPaneVisible)="ionSplitPaneOutputEvent($event)"> 
    <!--  our side menu  -->
    <ion-menu contentId="main">
      <ion-header class="ion-no-border">
        <ion-toolbar>
          <app-top-menu [visible]="isVisibleSplitPane" [showChat]="false"></app-top-menu>
        </ion-toolbar>
      </ion-header>

      <ng-container *ngIf="sharedStatesService?.activeTopMenu === 'connections'">
        <ion-item class="i-title" [class.item-active]="sharedStatesService.activeMenu === 'connections'"
          lines="none" detail button (click)="connectionsClicked()">
          <ion-icon slot="start" name="pulse-outline"></ion-icon>
          <ion-label class="basic-text">Connections</ion-label>
        </ion-item>
      </ng-container>

      <ion-content id="split-pane-content">
        <ng-container *ngIf="sharedStatesService?.activeTopMenu === 'connections'">
          <ion-item (click)="toggleMatches()"
            class="i-match-title" button lines="none">
            <ion-icon 
              slot="start" 
              [name]="sharedStatesService?.isMatchesOpen ? 'chevron-down-outline' : 'chevron-forward-outline'">
            </ion-icon>
            <ion-label class="basic-text">Matches</ion-label>
          </ion-item>

          <ng-container *ngIf="sharedStatesService?.isMatchesOpen">
            <ion-item class="i-match" button lines="none" *ngFor="let t of tmps">
              <ion-avatar slot="start">
                <ion-icon name="person"></ion-icon>
              </ion-avatar>
              <ion-label>
                <h2>Chip Avatar</h2>
                <p>last message {{ t }}</p>
              </ion-label>
            </ion-item>
          </ng-container>
        </ng-container>

        <ng-container *ngIf="sharedStatesService?.activeTopMenu === 'profile'">
          <ion-item class="i-title" [class.item-active]="sharedStatesService.activeMenu === 'profile'"
            lines="none" detail button (click)="profileClicked()">
            <ion-icon slot="start" name="person-outline"></ion-icon>
            <ion-label class="basic-text">Profile</ion-label>
          </ion-item>
          <ion-item class="i-title" [class.item-active]="sharedStatesService.activeMenu === 'settings'"
            lines="none" detail button (click)="settingsClicked()">
            <ion-icon slot="start" name="settings-outline"></ion-icon>
            <ion-label class="basic-text">Settings</ion-label>
          </ion-item>
          <ion-item
            lines="none" button (click)="logoutClicked()">
            <ion-icon slot="start" name="log-out-outline"></ion-icon>
            <ion-label class="basic-text">Log Out</ion-label>
          </ion-item>
        </ng-container>
      </ion-content>
    </ion-menu>

    <!-- the main content -->
    <ion-router-outlet id="main"></ion-router-outlet>
  </ion-split-pane>

</ion-app>
